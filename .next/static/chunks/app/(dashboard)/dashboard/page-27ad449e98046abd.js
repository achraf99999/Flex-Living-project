(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{9748:function(e,s,a){Promise.resolve().then(a.bind(a,5855))},5855:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return V}});var t=a(7437),l=a(2265),r=a(6070),n=a(7495),i=a(535),d=a(4508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=l.forwardRef((e,s)=>{let{className:a,variant:l,size:r,asChild:i=!1,...o}=e,m=i?n.g7:"button";return(0,t.jsx)(m,{className:(0,d.cn)(c({variant:l,size:r,className:a})),ref:s,...o})});o.displayName="Button";let m=l.forwardRef((e,s)=>{let{className:a,type:l,...r}=e;return(0,t.jsx)("input",{type:l,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});m.displayName="Input";var x=a(6569),u=a(875),h=a(2135),f=a(401);let p=x.fC;x.ZA;let g=x.B4,j=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(x.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[l,(0,t.jsx)(x.JO,{asChild:!0,children:(0,t.jsx)(u.Z,{className:"h-4 w-4 opacity-50"})})]})});j.displayName=x.xz.displayName;let v=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})})});v.displayName=x.u_.displayName;let b=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(u.Z,{className:"h-4 w-4"})})});b.displayName=x.$G.displayName;let N=l.forwardRef((e,s)=>{let{className:a,children:l,position:r="popper",...n}=e;return(0,t.jsx)(x.h_,{children:(0,t.jsxs)(x.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...n,children:[(0,t.jsx)(v,{}),(0,t.jsx)(x.l_,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(b,{})]})})});N.displayName=x.VY.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=x.__.displayName;let y=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(x.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(x.wU,{children:(0,t.jsx)(f.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(x.eT,{children:l})]})});y.displayName=x.ck.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=x.Z0.displayName;var w=a(721);let k=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(w.fC,{className:(0,d.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...l,ref:s,children:(0,t.jsx)(w.bU,{className:(0,d.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});k.displayName=w.fC.displayName;var C=a(2252),R=a(6595),A=a(3417),Z=a(5302),S=a(525),z=a(740),O=a(3247),E=a(2451),_=a(407);let Y=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function T(e){let{className:s,variant:a,...l}=e;return(0,t.jsx)("div",{className:(0,d.cn)(Y({variant:a}),s),...l})}var F=a(1146);let P=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(F.fC,{ref:s,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...l})});P.displayName=F.fC.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(F.Ee,{ref:s,className:(0,d.cn)("aspect-square h-full w-full",a),...l})}).displayName=F.Ee.displayName;let D=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(F.NY,{ref:s,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...l})});function G(e){var s,a,l;let{review:n,onApproveChange:i}=e;return(0,t.jsxs)(r.Zb,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(P,{children:(0,t.jsx)(D,{className:"bg-gray-100 text-gray-600",children:(null===(a=n.authorName)||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:s.toUpperCase())||"G"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900",children:n.authorName||"Anonymous Guest"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:(0,d.p6)(n.submittedAt)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-medium text-lg",children:(null===(l=n.ratingOverall)||void 0===l?void 0:l.toFixed(1))||"N/A"}),(0,t.jsx)(R.Z,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"})]})]}),n.text&&(0,t.jsx)("p",{className:"text-gray-700 mb-3 leading-relaxed",children:n.text}),n.categories&&Object.keys(n.categories).length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:Object.entries(n.categories).map(e=>{let[s,a]=e;return(0,t.jsxs)(T,{variant:"secondary",className:"text-xs",children:[s.replace("_"," "),": ",a,"/10"]},s)})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,t.jsxs)("div",{children:["Property: ",n.listing.name]}),(0,t.jsxs)("div",{children:["Channel: ",n.channel||"Unknown"]}),(0,t.jsxs)("div",{children:["Type: ",n.type.replace("-"," ")]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Approve"}),(0,t.jsx)(k,{checked:n.approved,onCheckedChange:e=>i(n.id,e)})]})]})]})}function V(){let[e,s]=(0,l.useState)([]),[a,n]=(0,l.useState)(null),[i,c]=(0,l.useState)([]),[x,u]=(0,l.useState)(!0),[h,f]=(0,l.useState)(null),[v,b]=(0,l.useState)(0),[w,Y]=(0,l.useState)({listingId:"all",type:"all",status:"all",channel:"all",minRating:void 0,maxRating:void 0,from:"",to:"",approved:void 0,q:"",page:1,pageSize:20,sort:"submittedAt:desc"}),T=(0,l.useCallback)(async()=>{u(!0),f(null);try{let e=new URLSearchParams;Object.entries(w).forEach(s=>{let[a,t]=s;""!==t&&void 0!==t&&"all"!==t&&e.append(a,t.toString())});let[a,t,l]=await Promise.all([fetch("/api/reviews/hostaway?".concat(e)),fetch("/api/reviews/analytics"),fetch("/api/listings")]);if(a.ok){let e=await a.json();s(e.data.items),b(e.data.total)}else throw Error("Failed to fetch reviews");if(t.ok){let e=await t.json();n(e.data)}if(l.ok){let e=await l.json();c(e.data)}}catch(e){console.error("Error fetching data:",e),f(e instanceof Error?e.message:"Failed to fetch data")}finally{u(!1)}},[w]);(0,l.useEffect)(()=>{T()},[T]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{x||(Y(e=>({...e,page:1})),T())},500);return()=>clearTimeout(e)},[w.listingId,w.type,w.status,w.channel,w.minRating,w.maxRating,w.from,w.to,w.approved,w.q,w.sort]);let F=async(e,a)=>{try{if((await fetch("/api/reviews/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:e,approved:a})})).ok)s(s=>s.map(s=>s.id===e?{...s,approved:a}:s)),f(null);else throw Error("Failed to approve review")}catch(e){console.error("Error approving review:",e),f(e instanceof Error?e.message:"Failed to approve review")}},P=(e,s)=>{Y(a=>({...a,[e]:s}))},D=e=>{Y(s=>({...s,page:e}))},V=Math.ceil(v/w.pageSize);return x&&0===e.length?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"h-8 w-64 bg-gray-200 rounded animate-pulse mb-2"}),(0,t.jsx)("div",{className:"h-4 w-96 bg-gray-200 rounded animate-pulse"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse mb-2"}),(0,t.jsx)("div",{className:"h-3 w-32 bg-gray-200 rounded animate-pulse"})]})]},s))}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsx)(r.Ol,{children:(0,t.jsx)("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse"})}),(0,t.jsx)(r.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-12 bg-gray-200 rounded animate-pulse"},s))})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[h&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,t.jsx)(C.Z,{className:"h-5 w-5"}),(0,t.jsxs)("span",{className:"font-medium",children:["Error: ",h]})]}),(0,t.jsx)(o,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>T(),children:"Retry"})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reviews Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage and approve property reviews"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium",children:"Average Rating"}),(0,t.jsx)(R.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==a?void 0:a.categoryAverages)?(Object.values(a.categoryAverages).reduce((e,s)=>e+s,0)/Object.values(a.categoryAverages).length).toFixed(1):"0.0"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2.1% from last month"})]})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Reviews"}),(0,t.jsx)(A.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:v}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium",children:"Approved Reviews"}),(0,t.jsx)(Z.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>e.approved).length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.length>0?Math.round(e.filter(e=>e.approved).length/e.length*100):0,"% approval rate"]})]})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium",children:"Active Properties"}),(0,t.jsx)(S.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:i.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+3 new this month"})]})]})]}),(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[(0,t.jsx)(o,{variant:"outline",size:"sm",onClick:()=>Y({...w,approved:!0,page:1}),children:"Approved Only"}),(0,t.jsx)(o,{variant:"outline",size:"sm",onClick:()=>Y({...w,minRating:8,page:1}),children:"High Ratings (8+)"}),(0,t.jsx)(o,{variant:"outline",size:"sm",onClick:()=>Y({...w,from:"2024-01-01",page:1}),children:"This Year"}),(0,t.jsx)(o,{variant:"outline",size:"sm",onClick:()=>Y({listingId:"all",type:"all",status:"all",channel:"all",minRating:void 0,maxRating:void 0,from:"",to:"",approved:void 0,q:"",page:1,pageSize:20,sort:"submittedAt:desc"}),children:"Clear All"})]}),(0,t.jsxs)(r.Zb,{className:"mb-8",children:[(0,t.jsx)(r.Ol,{children:(0,t.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(z.Z,{className:"h-5 w-5"}),"Filters"]})}),(0,t.jsx)(r.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Property"}),(0,t.jsxs)(p,{value:w.listingId,onValueChange:e=>P("listingId",e),children:[(0,t.jsx)(j,{children:(0,t.jsx)(g,{placeholder:"All properties"})}),(0,t.jsxs)(N,{children:[(0,t.jsx)(y,{value:"all",children:"All properties"}),i.map(e=>(0,t.jsx)(y,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),(0,t.jsxs)(p,{value:w.type,onValueChange:e=>P("type",e),children:[(0,t.jsx)(j,{children:(0,t.jsx)(g,{placeholder:"All types"})}),(0,t.jsxs)(N,{children:[(0,t.jsx)(y,{value:"all",children:"All types"}),(0,t.jsx)(y,{value:"guest-to-host",children:"Guest to Host"}),(0,t.jsx)(y,{value:"host-to-guest",children:"Host to Guest"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,t.jsxs)(p,{value:w.status,onValueChange:e=>P("status",e),children:[(0,t.jsx)(j,{children:(0,t.jsx)(g,{placeholder:"All statuses"})}),(0,t.jsxs)(N,{children:[(0,t.jsx)(y,{value:"all",children:"All statuses"}),(0,t.jsx)(y,{value:"published",children:"Published"}),(0,t.jsx)(y,{value:"draft",children:"Draft"}),(0,t.jsx)(y,{value:"hidden",children:"Hidden"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Channel"}),(0,t.jsxs)(p,{value:w.channel,onValueChange:e=>P("channel",e),children:[(0,t.jsx)(j,{children:(0,t.jsx)(g,{placeholder:"All channels"})}),(0,t.jsxs)(N,{children:[(0,t.jsx)(y,{value:"all",children:"All channels"}),(0,t.jsx)(y,{value:"airbnb",children:"Airbnb"}),(0,t.jsx)(y,{value:"booking",children:"Booking.com"}),(0,t.jsx)(y,{value:"google",children:"Google"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(O.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(m,{placeholder:"Search reviews...",value:w.q,onChange:e=>P("q",e.target.value),className:"pl-10"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Min Rating"}),(0,t.jsx)(m,{type:"number",min:"0",max:"10",placeholder:"0",value:w.minRating||"",onChange:e=>P("minRating",e.target.value?Number(e.target.value):void 0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Max Rating"}),(0,t.jsx)(m,{type:"number",min:"0",max:"10",placeholder:"10",value:w.maxRating||"",onChange:e=>P("maxRating",e.target.value?Number(e.target.value):void 0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"From Date"}),(0,t.jsx)(m,{type:"date",value:w.from,onChange:e=>P("from",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"To Date"}),(0,t.jsx)(m,{type:"date",value:w.to,onChange:e=>P("to",e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k,{checked:w.approved,onCheckedChange:e=>P("approved",e)}),(0,t.jsx)("label",{className:"text-sm font-medium",children:"Approved only"})]})]})})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsxs)(r.ll,{children:["Reviews (",v,")"]}),(0,t.jsx)(r.SZ,{children:"Manage and approve property reviews"})]}),(0,t.jsx)(r.aY,{children:x?(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-12 bg-gray-200 rounded animate-pulse"},s))}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left p-2",children:"Approve"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Property"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Rating"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Author"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Channel"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Type"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Text"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>{var s;return(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"p-2",children:(0,t.jsx)(k,{checked:e.approved,onCheckedChange:s=>F(e.id,s)})}),(0,t.jsx)("td",{className:"p-2 text-sm",children:(0,d.p6)(e.submittedAt)}),(0,t.jsx)("td",{className:"p-2 text-sm font-medium",children:e.listing.name}),(0,t.jsx)("td",{className:"p-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-medium",children:(null===(s=e.ratingOverall)||void 0===s?void 0:s.toFixed(1))||"N/A"}),(0,t.jsx)(R.Z,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"})]})}),(0,t.jsx)("td",{className:"p-2 text-sm",children:e.authorName||"Anonymous"}),(0,t.jsx)("td",{className:"p-2 text-sm capitalize",children:e.channel||"Unknown"}),(0,t.jsx)("td",{className:"p-2 text-sm capitalize",children:e.type.replace("-"," ")}),(0,t.jsx)("td",{className:"p-2 text-sm max-w-xs truncate",children:e.text||"No text provided"})]},e.id)})})]})}),0===e.length&&(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No reviews found matching your filters."}),(0,t.jsx)("div",{className:"md:hidden space-y-4 mt-6",children:e.map(e=>(0,t.jsx)(G,{review:e,onApproveChange:F},e.id))}),V>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(w.page-1)*w.pageSize+1," to ",Math.min(w.page*w.pageSize,v)," of ",v," results"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o,{variant:"outline",size:"sm",disabled:1===w.page,onClick:()=>D(w.page-1),children:[(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,t.jsxs)("span",{className:"flex items-center px-3 text-sm",children:["Page ",w.page," of ",V]}),(0,t.jsxs)(o,{variant:"outline",size:"sm",disabled:w.page>=V,onClick:()=>D(w.page+1),children:["Next",(0,t.jsx)(_.Z,{className:"h-4 w-4 ml-1"})]})]})]})]})})]})]})})}D.displayName=F.NY.displayName},6070:function(e,s,a){"use strict";a.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var t=a(7437),l=a(2265),r=a(4508);let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},4508:function(e,s,a){"use strict";a.d(s,{GD:function(){return i},cn:function(){return r},p6:function(){return n}});var t=a(1994),l=a(3335);function r(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.m6)((0,t.W)(s))}function n(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function i(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}}},function(e){e.O(0,[446,838,971,117,744],function(){return e(e.s=9748)}),_N_E=e.O()}]);