(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{4190:function(e,s,t){Promise.resolve().then(t.bind(t,5769))},5769:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var l=t(7437),r=t(2265),a=t(6070),i=t(9763);let n=(0,i.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),c=(0,i.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var d=t(6595);let o=(0,i.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var x=t(4508);function h(e){let{params:s}=e,[t,i]=(0,r.useState)([]),[h,m]=(0,r.useState)(null),[u,g]=(0,r.useState)(!0);(0,r.useEffect)(()=>{console.log("useEffect triggered with slug:",s.slug),f();let e=setTimeout(()=>{u&&(console.log("Loading timeout reached, setting loading to false"),g(!1))},1e4);return()=>clearTimeout(e)},[s.slug]);let f=async()=>{console.log("fetchPropertyData called"),g(!0);try{let e=await fetch("/api/listings");if(console.log("Listings response status:",e.status),e.ok){let t=await e.json();console.log("Listings data received:",t.data.length,"listings"),console.log("Looking for slug:",s.slug),console.log("Available listings:",t.data.map(e=>({name:e.name,slug:(0,x.GD)(e.name)})));let l=t.data.find(e=>{let t=(0,x.GD)(e.name);return console.log("Comparing:",t,"with",s.slug,"=",t===s.slug),t===s.slug});if(console.log("Found listing:",l),l){m(l);let e=await fetch("/api/public-reviews/".concat(l.id));if(e.ok){let s=await e.json();i(s.data.items)}}else console.log("No listing found for slug:",s.slug)}else console.error("Listings API failed:",e.status)}catch(e){console.error("Error fetching property data:",e)}finally{console.log("Setting loading to false"),g(!1)}};if(u)return(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)("div",{className:"text-lg",children:"Loading property..."})});if(!h)return(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Property not found"}),(0,l.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["Could not find property with slug: ",(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:s.slug})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["Available properties:",(0,l.jsxs)("ul",{className:"mt-2 space-y-1",children:[(0,l.jsxs)("li",{children:["• ",(0,l.jsx)("a",{href:"/properties/2b-n1-a-29-shoreditch-heights",className:"text-blue-600 hover:underline",children:"2B N1 A - 29 Shoreditch Heights"})]}),(0,l.jsxs)("li",{children:["• ",(0,l.jsx)("a",{href:"/properties/1b-studio-15-brick-lane",className:"text-blue-600 hover:underline",children:"1B Studio - 15 Brick Lane"})]}),(0,l.jsxs)("li",{children:["• ",(0,l.jsx)("a",{href:"/properties/3b-penthouse-45-canary-wharf",className:"text-blue-600 hover:underline",children:"3B Penthouse - 45 Canary Wharf"})]})]})]})]})});let j=0===t.length?0:t.reduce((e,s)=>e+(s.ratingOverall||0),0)/t.length,p=(()=>{let e={};t.forEach(s=>{s.categories&&Object.entries(s.categories).forEach(s=>{let[t,l]=s;e[t]||(e[t]={sum:0,count:0}),e[t].sum+=l,e[t].count+=1})});let s={};return Object.entries(e).forEach(e=>{let[t,{sum:l,count:r}]=e;s[t]=Math.round(l/r*10)/10}),s})();return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:h.name}),(0,l.jsxs)("div",{className:"flex items-center gap-6 text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"London, UK"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"Available for booking"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsxs)(a.Zb,{children:[(0,l.jsx)(a.Ol,{children:(0,l.jsx)(a.ll,{children:"About this property"})}),(0,l.jsxs)(a.aY,{children:[(0,l.jsx)("p",{className:"text-gray-700 mb-4",children:"Experience luxury living in the heart of London. This beautifully appointed property offers modern amenities, stunning views, and exceptional service for your stay."}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-2",children:"Amenities"}),(0,l.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,l.jsx)("li",{children:"• High-speed WiFi"}),(0,l.jsx)("li",{children:"• Fully equipped kitchen"}),(0,l.jsx)("li",{children:"• Air conditioning"}),(0,l.jsx)("li",{children:"• 24/7 support"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-2",children:"House Rules"}),(0,l.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,l.jsx)("li",{children:"• No smoking"}),(0,l.jsx)("li",{children:"• No parties"}),(0,l.jsx)("li",{children:"• Check-in: 3 PM"}),(0,l.jsx)("li",{children:"• Check-out: 11 AM"})]})]})]})]})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)(a.Zb,{children:[(0,l.jsxs)(a.Ol,{children:[(0,l.jsx)(a.ll,{children:"Guest Reviews"}),(0,l.jsx)(a.SZ,{children:"What guests are saying"})]}),(0,l.jsxs)(a.aY,{children:[(0,l.jsxs)("div",{className:"text-center mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-3xl font-bold",children:j.toFixed(1)}),(0,l.jsx)(d.Z,{className:"h-6 w-6 fill-yellow-400 text-yellow-400"})]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[t.length," reviews"]})]}),Object.entries(p).length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm",children:"Category Ratings"}),Object.entries(p).map(e=>{let[s,t]=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,l.jsx)("span",{className:"capitalize",children:s.replace("_"," ")}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"font-medium",children:t.toFixed(1)}),(0,l.jsx)(d.Z,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})]})]},s)})]})]})]})})]}),(0,l.jsxs)(a.Zb,{children:[(0,l.jsxs)(a.Ol,{children:[(0,l.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(d.Z,{className:"h-5 w-5"}),"Guest Reviews (",t.length,")"]}),(0,l.jsx)(a.SZ,{children:"Read what our guests have to say about their stay"})]}),(0,l.jsx)(a.aY,{children:t.length>0?(0,l.jsx)("div",{className:"space-y-6",children:t.map(e=>{var s;return(0,l.jsxs)("div",{className:"border-b pb-6 last:border-b-0",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,l.jsx)(o,{className:"h-5 w-5 text-gray-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold",children:e.authorName||"Anonymous Guest"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:(0,x.p6)(e.submittedAt)})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"font-medium",children:(null===(s=e.ratingOverall)||void 0===s?void 0:s.toFixed(1))||"N/A"}),(0,l.jsx)(d.Z,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"})]})]}),e.text&&(0,l.jsx)("p",{className:"text-gray-700 mb-3",children:e.text}),e.categories&&Object.keys(e.categories).length>0&&(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:Object.entries(e.categories).map(e=>{let[s,t]=e;return(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"capitalize text-gray-600",children:s.replace("_"," ")}),(0,l.jsxs)("span",{className:"font-medium",children:[t,"/10"]})]},s)})}),(0,l.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["Review from ",e.channel||"Unknown"," • ",e.type.replace("-"," ")]})]},e.id)})}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(d.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No reviews yet"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Be the first to review this property after your stay!"})]})})]})]})})}},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var l=t(7437),r=t(2265),a=t(4508);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...r})});n.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},4508:function(e,s,t){"use strict";t.d(s,{GD:function(){return n},cn:function(){return a},p6:function(){return i}});var l=t(1994),r=t(3335);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,l.W)(s))}function i(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function n(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}}},function(e){e.O(0,[446,971,117,744],function(){return e(e.s=4190)}),_N_E=e.O()}]);