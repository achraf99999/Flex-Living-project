"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/listings/route";
exports.ids = ["app/api/listings/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2Fhome%2Fachref%2FDownloads%2Fachref%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fachref%2FDownloads%2Fachref&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2Fhome%2Fachref%2FDownloads%2Fachref%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fachref%2FDownloads%2Fachref&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_achref_Downloads_achref_app_api_listings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/listings/route.ts */ \"(rsc)/./app/api/listings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/listings/route\",\n        pathname: \"/api/listings\",\n        filename: \"route\",\n        bundlePath: \"app/api/listings/route\"\n    },\n    resolvedPagePath: \"/home/achref/Downloads/achref/app/api/listings/route.ts\",\n    nextConfigOutput,\n    userland: _home_achref_Downloads_achref_app_api_listings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/listings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZsaXN0aW5ncyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGbGlzdGluZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZsaXN0aW5ncyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGYWNocmVmJTJGRG93bmxvYWRzJTJGYWNocmVmJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGYWNocmVmJTJGRG93bmxvYWRzJTJGYWNocmVmJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNPO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxleGxpdmluZy1yZXZpZXdzLz82NmIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL2FjaHJlZi9Eb3dubG9hZHMvYWNocmVmL2FwcC9hcGkvbGlzdGluZ3Mvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2xpc3RpbmdzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbGlzdGluZ3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2xpc3RpbmdzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2hvbWUvYWNocmVmL0Rvd25sb2Fkcy9hY2hyZWYvYXBwL2FwaS9saXN0aW5ncy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbGlzdGluZ3Mvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2Fhome%2Fachref%2FDownloads%2Fachref%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fachref%2FDownloads%2Fachref&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/listings/route.ts":
/*!***********************************!*\
  !*** ./app/api/listings/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _services_analytics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/analytics */ \"(rsc)/./services/analytics.ts\");\n\n\nasync function GET(request) {\n    try {\n        const analyticsService = new _services_analytics__WEBPACK_IMPORTED_MODULE_1__.AnalyticsService();\n        const result = await analyticsService.getListingsWithStats();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"success\",\n            data: result\n        });\n    } catch (error) {\n        console.error(\"Error fetching listings:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            error: \"Failed to fetch listings\",\n            message: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2xpc3RpbmdzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RDtBQUNBO0FBR2pELGVBQWVFLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNQyxtQkFBbUIsSUFBSUgsaUVBQWdCQTtRQUM3QyxNQUFNSSxTQUFTLE1BQU1ELGlCQUFpQkUsb0JBQW9CO1FBRTFELE9BQU9OLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFDdkJDLFFBQVE7WUFDUkMsTUFBTUo7UUFDUjtJQUNGLEVBQUUsT0FBT0ssT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUUxQyxPQUFPVixxREFBWUEsQ0FBQ08sSUFBSSxDQUN0QjtZQUNFQyxRQUFRO1lBQ1JFLE9BQU87WUFDUEUsU0FBU0YsaUJBQWlCRyxRQUFRSCxNQUFNRSxPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFSixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZXhsaXZpbmctcmV2aWV3cy8uL2FwcC9hcGkvbGlzdGluZ3Mvcm91dGUudHM/NTQwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBBbmFseXRpY3NTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9hbmFseXRpY3MnO1xyXG5pbXBvcnQgeyBBcGlSZXNwb25zZSwgTGlzdGluZ1dpdGhTdGF0cyB9IGZyb20gJ0AvdHlwZXMnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFByb21pc2U8TmV4dFJlc3BvbnNlPEFwaVJlc3BvbnNlPExpc3RpbmdXaXRoU3RhdHNbXT4+PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFuYWx5dGljc1NlcnZpY2UgPSBuZXcgQW5hbHl0aWNzU2VydmljZSgpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRMaXN0aW5nc1dpdGhTdGF0cygpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgZGF0YTogcmVzdWx0LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGxpc3RpbmdzOicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGxpc3RpbmdzJyxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiQW5hbHl0aWNzU2VydmljZSIsIkdFVCIsInJlcXVlc3QiLCJhbmFseXRpY3NTZXJ2aWNlIiwicmVzdWx0IiwiZ2V0TGlzdGluZ3NXaXRoU3RhdHMiLCJqc29uIiwic3RhdHVzIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/listings/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZDO0FBRTdDLE1BQU1DLGtCQUFrQkM7QUFJakIsTUFBTUMsU0FBU0YsZ0JBQWdCRSxNQUFNLElBQUksSUFBSUgsd0RBQVlBLEdBQUU7QUFFbEUsSUFBSUksSUFBeUIsRUFBY0gsZ0JBQWdCRSxNQUFNLEdBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxleGxpdmluZy1yZXZpZXdzLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXHJcblxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xyXG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schemas.ts":
/*!************************!*\
  !*** ./lib/schemas.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyticsFiltersSchema: () => (/* binding */ analyticsFiltersSchema),\n/* harmony export */   approveReviewSchema: () => (/* binding */ approveReviewSchema),\n/* harmony export */   hostawayReviewSchema: () => (/* binding */ hostawayReviewSchema),\n/* harmony export */   normalizedReviewSchema: () => (/* binding */ normalizedReviewSchema),\n/* harmony export */   reviewFiltersSchema: () => (/* binding */ reviewFiltersSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst reviewFiltersSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    listingId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    channel: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    minRating: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().min(0).max(10).optional(),\n    maxRating: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().min(0).max(10).optional(),\n    from: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    to: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    approved: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.boolean().optional(),\n    q: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    page: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().min(1).default(1),\n    pageSize: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().min(1).max(100).default(20),\n    sort: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nconst approveReviewSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    reviewId: zod__WEBPACK_IMPORTED_MODULE_0__.string().cuid(),\n    approved: zod__WEBPACK_IMPORTED_MODULE_0__.boolean()\n});\nconst analyticsFiltersSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    listingId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    from: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    to: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    bucket: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"day\",\n        \"week\",\n        \"month\"\n    ]).default(\"month\")\n});\nconst hostawayReviewSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    status: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    rating: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    publicReview: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    reviewCategory: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        category: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n        rating: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n    })).optional(),\n    submittedAt: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    guestName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    listingName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    channel: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nconst normalizedReviewSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    source: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"hostaway\",\n        \"google\"\n    ]),\n    externalId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    listing: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"host-to-guest\",\n        \"guest-to-host\"\n    ]),\n    status: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"published\",\n        \"draft\",\n        \"hidden\"\n    ]),\n    ratingOverall: zod__WEBPACK_IMPORTED_MODULE_0__.number().nullable().optional(),\n    categories: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.number()).optional(),\n    text: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    authorName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    channel: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    submittedAt: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    approved: zod__WEBPACK_IMPORTED_MODULE_0__.boolean()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2NoZW1hcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0I7QUFFakIsTUFBTUMsc0JBQXNCRCx1Q0FBUSxDQUFDO0lBQzFDRyxXQUFXSCx1Q0FBUSxHQUFHSyxRQUFRO0lBQzlCQyxNQUFNTix1Q0FBUSxHQUFHSyxRQUFRO0lBQ3pCRSxRQUFRUCx1Q0FBUSxHQUFHSyxRQUFRO0lBQzNCRyxTQUFTUix1Q0FBUSxHQUFHSyxRQUFRO0lBQzVCSSxXQUFXVCx1Q0FBUSxDQUFDVyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHQyxHQUFHLENBQUMsSUFBSVIsUUFBUTtJQUNwRFMsV0FBV2QsdUNBQVEsQ0FBQ1csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDLElBQUlSLFFBQVE7SUFDcERVLE1BQU1mLHVDQUFRLEdBQUdLLFFBQVE7SUFDekJXLElBQUloQix1Q0FBUSxHQUFHSyxRQUFRO0lBQ3ZCWSxVQUFVakIsdUNBQVEsQ0FBQ2tCLE9BQU8sR0FBR2IsUUFBUTtJQUNyQ2MsR0FBR25CLHVDQUFRLEdBQUdLLFFBQVE7SUFDdEJlLE1BQU1wQix1Q0FBUSxDQUFDVyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHUyxPQUFPLENBQUM7SUFDdkNDLFVBQVV0Qix1Q0FBUSxDQUFDVyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHQyxHQUFHLENBQUMsS0FBS1EsT0FBTyxDQUFDO0lBQ3BERSxNQUFNdkIsdUNBQVEsR0FBR0ssUUFBUTtBQUMzQixHQUFHO0FBRUksTUFBTW1CLHNCQUFzQnhCLHVDQUFRLENBQUM7SUFDMUN5QixVQUFVekIsdUNBQVEsR0FBRzBCLElBQUk7SUFDekJULFVBQVVqQix3Q0FBUztBQUNyQixHQUFHO0FBRUksTUFBTTJCLHlCQUF5QjNCLHVDQUFRLENBQUM7SUFDN0NHLFdBQVdILHVDQUFRLEdBQUdLLFFBQVE7SUFDOUJVLE1BQU1mLHVDQUFRLEdBQUdLLFFBQVE7SUFDekJXLElBQUloQix1Q0FBUSxHQUFHSyxRQUFRO0lBQ3ZCdUIsUUFBUTVCLHdDQUFNLENBQUM7UUFBQztRQUFPO1FBQVE7S0FBUSxFQUFFcUIsT0FBTyxDQUFDO0FBQ25ELEdBQUc7QUFFSSxNQUFNUyx1QkFBdUI5Qix1Q0FBUSxDQUFDO0lBQzNDK0IsSUFBSS9CLHVDQUFRO0lBQ1pNLE1BQU1OLHVDQUFRO0lBQ2RPLFFBQVFQLHVDQUFRO0lBQ2hCZ0MsUUFBUWhDLHVDQUFRLEdBQUdLLFFBQVE7SUFDM0I0QixjQUFjakMsdUNBQVEsR0FBR0ssUUFBUTtJQUNqQzZCLGdCQUFnQmxDLHNDQUFPLENBQUNBLHVDQUFRLENBQUM7UUFDL0JvQyxVQUFVcEMsdUNBQVE7UUFDbEJnQyxRQUFRaEMsdUNBQVE7SUFDbEIsSUFBSUssUUFBUTtJQUNaZ0MsYUFBYXJDLHVDQUFRO0lBQ3JCc0MsV0FBV3RDLHVDQUFRLEdBQUdLLFFBQVE7SUFDOUJrQyxhQUFhdkMsdUNBQVE7SUFDckJRLFNBQVNSLHVDQUFRLEdBQUdLLFFBQVE7QUFDOUIsR0FBRztBQUVJLE1BQU1tQyx5QkFBeUJ4Qyx1Q0FBUSxDQUFDO0lBQzdDK0IsSUFBSS9CLHVDQUFRO0lBQ1p5QyxRQUFRekMsd0NBQU0sQ0FBQztRQUFDO1FBQVk7S0FBUztJQUNyQzBDLFlBQVkxQyx1Q0FBUSxHQUFHSyxRQUFRO0lBQy9Cc0MsU0FBUzNDLHVDQUFRLENBQUM7UUFDaEIrQixJQUFJL0IsdUNBQVE7UUFDWjRDLE1BQU01Qyx1Q0FBUTtJQUNoQjtJQUNBTSxNQUFNTix3Q0FBTSxDQUFDO1FBQUM7UUFBaUI7S0FBZ0I7SUFDL0NPLFFBQVFQLHdDQUFNLENBQUM7UUFBQztRQUFhO1FBQVM7S0FBUztJQUMvQzZDLGVBQWU3Qyx1Q0FBUSxHQUFHOEMsUUFBUSxHQUFHekMsUUFBUTtJQUM3QzBDLFlBQVkvQyx1Q0FBUSxDQUFDQSx1Q0FBUSxJQUFJSyxRQUFRO0lBQ3pDNEMsTUFBTWpELHVDQUFRLEdBQUdLLFFBQVE7SUFDekI2QyxZQUFZbEQsdUNBQVEsR0FBR0ssUUFBUTtJQUMvQkcsU0FBU1IsdUNBQVEsR0FBR0ssUUFBUTtJQUM1QmdDLGFBQWFyQyx1Q0FBUTtJQUNyQmlCLFVBQVVqQix3Q0FBUztBQUNyQixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxleGxpdmluZy1yZXZpZXdzLy4vbGliL3NjaGVtYXMudHM/NDVjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJldmlld0ZpbHRlcnNTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgbGlzdGluZ0lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgdHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIGNoYW5uZWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBtaW5SYXRpbmc6IHouY29lcmNlLm51bWJlcigpLm1pbigwKS5tYXgoMTApLm9wdGlvbmFsKCksXHJcbiAgbWF4UmF0aW5nOiB6LmNvZXJjZS5udW1iZXIoKS5taW4oMCkubWF4KDEwKS5vcHRpb25hbCgpLFxyXG4gIGZyb206IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICB0bzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIGFwcHJvdmVkOiB6LmNvZXJjZS5ib29sZWFuKCkub3B0aW9uYWwoKSxcclxuICBxOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgcGFnZTogei5jb2VyY2UubnVtYmVyKCkubWluKDEpLmRlZmF1bHQoMSksXHJcbiAgcGFnZVNpemU6IHouY29lcmNlLm51bWJlcigpLm1pbigxKS5tYXgoMTAwKS5kZWZhdWx0KDIwKSxcclxuICBzb3J0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFwcHJvdmVSZXZpZXdTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgcmV2aWV3SWQ6IHouc3RyaW5nKCkuY3VpZCgpLFxyXG4gIGFwcHJvdmVkOiB6LmJvb2xlYW4oKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgYW5hbHl0aWNzRmlsdGVyc1NjaGVtYSA9IHoub2JqZWN0KHtcclxuICBsaXN0aW5nSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBmcm9tOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgdG86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBidWNrZXQ6IHouZW51bShbXCJkYXlcIiwgXCJ3ZWVrXCIsIFwibW9udGhcIl0pLmRlZmF1bHQoXCJtb250aFwiKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgaG9zdGF3YXlSZXZpZXdTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgaWQ6IHouc3RyaW5nKCksXHJcbiAgdHlwZTogei5zdHJpbmcoKSxcclxuICBzdGF0dXM6IHouc3RyaW5nKCksXHJcbiAgcmF0aW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXHJcbiAgcHVibGljUmV2aWV3OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgcmV2aWV3Q2F0ZWdvcnk6IHouYXJyYXkoei5vYmplY3Qoe1xyXG4gICAgY2F0ZWdvcnk6IHouc3RyaW5nKCksXHJcbiAgICByYXRpbmc6IHoubnVtYmVyKCksXHJcbiAgfSkpLm9wdGlvbmFsKCksXHJcbiAgc3VibWl0dGVkQXQ6IHouc3RyaW5nKCksXHJcbiAgZ3Vlc3ROYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgbGlzdGluZ05hbWU6IHouc3RyaW5nKCksXHJcbiAgY2hhbm5lbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxpemVkUmV2aWV3U2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIGlkOiB6LnN0cmluZygpLFxyXG4gIHNvdXJjZTogei5lbnVtKFtcImhvc3Rhd2F5XCIsIFwiZ29vZ2xlXCJdKSxcclxuICBleHRlcm5hbElkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgbGlzdGluZzogei5vYmplY3Qoe1xyXG4gICAgaWQ6IHouc3RyaW5nKCksXHJcbiAgICBuYW1lOiB6LnN0cmluZygpLFxyXG4gIH0pLFxyXG4gIHR5cGU6IHouZW51bShbXCJob3N0LXRvLWd1ZXN0XCIsIFwiZ3Vlc3QtdG8taG9zdFwiXSksXHJcbiAgc3RhdHVzOiB6LmVudW0oW1wicHVibGlzaGVkXCIsIFwiZHJhZnRcIiwgXCJoaWRkZW5cIl0pLFxyXG4gIHJhdGluZ092ZXJhbGw6IHoubnVtYmVyKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxyXG4gIGNhdGVnb3JpZXM6IHoucmVjb3JkKHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXHJcbiAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIGF1dGhvck5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBjaGFubmVsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgc3VibWl0dGVkQXQ6IHouc3RyaW5nKCksXHJcbiAgYXBwcm92ZWQ6IHouYm9vbGVhbigpLFxyXG59KTtcclxuIl0sIm5hbWVzIjpbInoiLCJyZXZpZXdGaWx0ZXJzU2NoZW1hIiwib2JqZWN0IiwibGlzdGluZ0lkIiwic3RyaW5nIiwib3B0aW9uYWwiLCJ0eXBlIiwic3RhdHVzIiwiY2hhbm5lbCIsIm1pblJhdGluZyIsImNvZXJjZSIsIm51bWJlciIsIm1pbiIsIm1heCIsIm1heFJhdGluZyIsImZyb20iLCJ0byIsImFwcHJvdmVkIiwiYm9vbGVhbiIsInEiLCJwYWdlIiwiZGVmYXVsdCIsInBhZ2VTaXplIiwic29ydCIsImFwcHJvdmVSZXZpZXdTY2hlbWEiLCJyZXZpZXdJZCIsImN1aWQiLCJhbmFseXRpY3NGaWx0ZXJzU2NoZW1hIiwiYnVja2V0IiwiZW51bSIsImhvc3Rhd2F5UmV2aWV3U2NoZW1hIiwiaWQiLCJyYXRpbmciLCJwdWJsaWNSZXZpZXciLCJyZXZpZXdDYXRlZ29yeSIsImFycmF5IiwiY2F0ZWdvcnkiLCJzdWJtaXR0ZWRBdCIsImd1ZXN0TmFtZSIsImxpc3RpbmdOYW1lIiwibm9ybWFsaXplZFJldmlld1NjaGVtYSIsInNvdXJjZSIsImV4dGVybmFsSWQiLCJsaXN0aW5nIiwibmFtZSIsInJhdGluZ092ZXJhbGwiLCJudWxsYWJsZSIsImNhdGVnb3JpZXMiLCJyZWNvcmQiLCJ0ZXh0IiwiYXV0aG9yTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/schemas.ts\n");

/***/ }),

/***/ "(rsc)/./services/analytics.ts":
/*!*******************************!*\
  !*** ./services/analytics.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsService: () => (/* binding */ AnalyticsService)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_schemas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/schemas */ \"(rsc)/./lib/schemas.ts\");\n/* harmony import */ var _barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=format,subDays,subMonths,subWeeks!=!date-fns */ \"(rsc)/./node_modules/date-fns/subDays.mjs\");\n/* harmony import */ var _barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=format,subDays,subMonths,subWeeks!=!date-fns */ \"(rsc)/./node_modules/date-fns/subWeeks.mjs\");\n/* harmony import */ var _barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=format,subDays,subMonths,subWeeks!=!date-fns */ \"(rsc)/./node_modules/date-fns/subMonths.mjs\");\n/* harmony import */ var _barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=format,subDays,subMonths,subWeeks!=!date-fns */ \"(rsc)/./node_modules/date-fns/format.mjs\");\n\n\n\nclass AnalyticsService {\n    async getAnalytics(filters) {\n        const validatedFilters = _lib_schemas__WEBPACK_IMPORTED_MODULE_1__.analyticsFiltersSchema.parse(filters);\n        const where = {};\n        if (validatedFilters.listingId) {\n            where.listingId = validatedFilters.listingId;\n        }\n        if (validatedFilters.from || validatedFilters.to) {\n            where.submittedAt = {};\n            if (validatedFilters.from) {\n                where.submittedAt.gte = new Date(validatedFilters.from);\n            }\n            if (validatedFilters.to) {\n                where.submittedAt.lte = new Date(validatedFilters.to);\n            }\n        }\n        // Get top listings\n        const topListings = await this.getTopListings(where);\n        // Get category averages\n        const categoryAverages = await this.getCategoryAverages(where);\n        // Get trend data\n        const trend = await this.getTrendData(where, validatedFilters.bucket);\n        // Get issues (categories with low ratings)\n        const issues = await this.getIssues(where);\n        return {\n            topListings,\n            categoryAverages,\n            trend,\n            issues\n        };\n    }\n    async getTopListings(where) {\n        const listings = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.prisma.review.groupBy({\n            by: [\n                \"listingId\"\n            ],\n            where,\n            _count: {\n                id: true\n            },\n            _avg: {\n                ratingOverall: true\n            }\n        });\n        const listingIds = listings.map((l)=>l.listingId);\n        const listingDetails = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.prisma.listing.findMany({\n            where: {\n                id: {\n                    in: listingIds\n                }\n            },\n            select: {\n                id: true,\n                name: true\n            }\n        });\n        return listings.map((listing)=>{\n            const detail = listingDetails.find((d)=>d.id === listing.listingId);\n            return {\n                listingId: listing.listingId,\n                name: detail?.name || \"Unknown\",\n                avgRating: listing._avg.ratingOverall || 0,\n                count: listing._count.id\n            };\n        }).sort((a, b)=>b.avgRating - a.avgRating).slice(0, 5);\n    }\n    async getCategoryAverages(where) {\n        const reviews = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.prisma.review.findMany({\n            where,\n            select: {\n                categories: true\n            }\n        });\n        const categoryTotals = {};\n        reviews.forEach((review)=>{\n            if (review.categories) {\n                const categories = review.categories;\n                Object.entries(categories).forEach(([category, rating])=>{\n                    if (!categoryTotals[category]) {\n                        categoryTotals[category] = {\n                            sum: 0,\n                            count: 0\n                        };\n                    }\n                    categoryTotals[category].sum += rating;\n                    categoryTotals[category].count += 1;\n                });\n            }\n        });\n        const averages = {};\n        Object.entries(categoryTotals).forEach(([category, { sum, count }])=>{\n            averages[category] = Math.round(sum / count * 10) / 10;\n        });\n        return averages;\n    }\n    async getTrendData(where, bucket) {\n        const now = new Date();\n        let startDate;\n        let formatString;\n        let groupBy;\n        switch(bucket){\n            case \"day\":\n                startDate = (0,_barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_2__.subDays)(now, 30);\n                formatString = \"yyyy-MM-dd\";\n                groupBy = {\n                    year: true,\n                    month: true,\n                    day: true\n                };\n                break;\n            case \"week\":\n                startDate = (0,_barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_3__.subWeeks)(now, 12);\n                formatString = \"yyyy-'W'ww\";\n                groupBy = {\n                    year: true,\n                    week: true\n                };\n                break;\n            case \"month\":\n                startDate = (0,_barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_4__.subMonths)(now, 12);\n                formatString = \"yyyy-MM\";\n                groupBy = {\n                    year: true,\n                    month: true\n                };\n                break;\n        }\n        const trendData = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.prisma.review.groupBy({\n            by: [\n                \"submittedAt\"\n            ],\n            where: {\n                ...where,\n                submittedAt: {\n                    gte: startDate\n                }\n            },\n            _count: {\n                id: true\n            },\n            _avg: {\n                ratingOverall: true\n            }\n        });\n        // Group by bucket\n        const buckets = {};\n        trendData.forEach((item)=>{\n            let bucketKey;\n            switch(bucket){\n                case \"day\":\n                    bucketKey = (0,_barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_5__.format)(item.submittedAt, \"yyyy-MM-dd\");\n                    break;\n                case \"week\":\n                    bucketKey = (0,_barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_5__.format)(item.submittedAt, \"yyyy-'W'ww\");\n                    break;\n                case \"month\":\n                    bucketKey = (0,_barrel_optimize_names_format_subDays_subMonths_subWeeks_date_fns__WEBPACK_IMPORTED_MODULE_5__.format)(item.submittedAt, \"yyyy-MM\");\n                    break;\n            }\n            if (!buckets[bucketKey]) {\n                buckets[bucketKey] = {\n                    sum: 0,\n                    count: 0,\n                    ratings: []\n                };\n            }\n            buckets[bucketKey].sum += item._count.id;\n            buckets[bucketKey].count += 1;\n            if (item._avg.ratingOverall) {\n                buckets[bucketKey].ratings.push(item._avg.ratingOverall);\n            }\n        });\n        return Object.entries(buckets).map(([bucket, data])=>({\n                bucket,\n                avgRating: data.ratings.length > 0 ? Math.round(data.ratings.reduce((a, b)=>a + b, 0) / data.ratings.length * 10) / 10 : 0,\n                count: data.sum\n            })).sort((a, b)=>a.bucket.localeCompare(b.bucket));\n    }\n    async getIssues(where) {\n        const categoryAverages = await this.getCategoryAverages(where);\n        const issues = [];\n        Object.entries(categoryAverages).forEach(([category, avg])=>{\n            if (avg < 7) {\n                issues.push({\n                    category,\n                    avg,\n                    delta: -1.1\n                });\n            }\n        });\n        return issues;\n    }\n    async getListingsWithStats() {\n        const listings = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.prisma.review.groupBy({\n            by: [\n                \"listingId\"\n            ],\n            _count: {\n                id: true\n            },\n            _avg: {\n                ratingOverall: true\n            }\n        });\n        const listingIds = listings.map((l)=>l.listingId);\n        const listingDetails = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.prisma.listing.findMany({\n            where: {\n                id: {\n                    in: listingIds\n                }\n            },\n            select: {\n                id: true,\n                name: true\n            }\n        });\n        return listings.map((listing)=>{\n            const detail = listingDetails.find((d)=>d.id === listing.listingId);\n            return {\n                id: listing.listingId,\n                name: detail?.name || \"Unknown\",\n                avgRating: Math.round((listing._avg.ratingOverall || 0) * 10) / 10,\n                reviewCount: listing._count.id\n            };\n        }).sort((a, b)=>b.avgRating - a.avgRating);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MkNBQU1BLENBQUN3QyxPQUFPLENBQUNDLFFBQVEsQ0FBQztZQUNuRDlCLE9BQU87Z0JBQUVzQixJQUFJO29CQUFFUyxJQUFJTjtnQkFBVztZQUFFO1lBQ2hDTyxRQUFRO2dCQUFFVixJQUFJO2dCQUFNVyxNQUFNO1lBQUs7UUFDakM7UUFFQSxPQUFPaEIsU0FDSlMsR0FBRyxDQUFDRyxDQUFBQTtZQUNILE1BQU1LLFNBQVNOLGVBQWVPLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRWQsRUFBRSxLQUFLTyxRQUFRNUIsU0FBUztZQUNsRSxPQUFPO2dCQUNMcUIsSUFBSU8sUUFBUTVCLFNBQVM7Z0JBQ3JCZ0MsTUFBTUMsUUFBUUQsUUFBUTtnQkFDdEJJLFdBQVdnQixLQUFLQyxLQUFLLENBQUMsQ0FBQ3pCLFFBQVFOLElBQUksQ0FBQ0MsYUFBYSxJQUFJLEtBQUssTUFBTTtnQkFDaEVtRCxhQUFhOUMsUUFBUVIsTUFBTSxDQUFDQyxFQUFFO1lBQ2hDO1FBQ0YsR0FDQ2lCLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFSixTQUFTLEdBQUdHLEVBQUVILFNBQVM7SUFDN0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZXhsaXZpbmctcmV2aWV3cy8uL3NlcnZpY2VzL2FuYWx5dGljcy50cz9hYTg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL2RiJztcclxuaW1wb3J0IHsgQW5hbHl0aWNzRGF0YSwgTGlzdGluZ1dpdGhTdGF0cyB9IGZyb20gJ0AvdHlwZXMnO1xyXG5pbXBvcnQgeyBhbmFseXRpY3NGaWx0ZXJzU2NoZW1hIH0gZnJvbSAnQC9saWIvc2NoZW1hcyc7XHJcbmltcG9ydCB7IGZvcm1hdCwgc3ViRGF5cywgc3ViV2Vla3MsIHN1Yk1vbnRocywgc3RhcnRPZkRheSwgc3RhcnRPZldlZWssIHN0YXJ0T2ZNb250aCB9IGZyb20gJ2RhdGUtZm5zJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBbmFseXRpY3NTZXJ2aWNlIHtcclxuICBhc3luYyBnZXRBbmFseXRpY3MoZmlsdGVyczogYW55KTogUHJvbWlzZTxBbmFseXRpY3NEYXRhPiB7XHJcbiAgICBjb25zdCB2YWxpZGF0ZWRGaWx0ZXJzID0gYW5hbHl0aWNzRmlsdGVyc1NjaGVtYS5wYXJzZShmaWx0ZXJzKTtcclxuICAgIFxyXG4gICAgY29uc3Qgd2hlcmU6IGFueSA9IHt9O1xyXG4gICAgXHJcbiAgICBpZiAodmFsaWRhdGVkRmlsdGVycy5saXN0aW5nSWQpIHtcclxuICAgICAgd2hlcmUubGlzdGluZ0lkID0gdmFsaWRhdGVkRmlsdGVycy5saXN0aW5nSWQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh2YWxpZGF0ZWRGaWx0ZXJzLmZyb20gfHwgdmFsaWRhdGVkRmlsdGVycy50bykge1xyXG4gICAgICB3aGVyZS5zdWJtaXR0ZWRBdCA9IHt9O1xyXG4gICAgICBpZiAodmFsaWRhdGVkRmlsdGVycy5mcm9tKSB7XHJcbiAgICAgICAgd2hlcmUuc3VibWl0dGVkQXQuZ3RlID0gbmV3IERhdGUodmFsaWRhdGVkRmlsdGVycy5mcm9tKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodmFsaWRhdGVkRmlsdGVycy50bykge1xyXG4gICAgICAgIHdoZXJlLnN1Ym1pdHRlZEF0Lmx0ZSA9IG5ldyBEYXRlKHZhbGlkYXRlZEZpbHRlcnMudG8pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEdldCB0b3AgbGlzdGluZ3NcclxuICAgIGNvbnN0IHRvcExpc3RpbmdzID0gYXdhaXQgdGhpcy5nZXRUb3BMaXN0aW5ncyh3aGVyZSk7XHJcbiAgICBcclxuICAgIC8vIEdldCBjYXRlZ29yeSBhdmVyYWdlc1xyXG4gICAgY29uc3QgY2F0ZWdvcnlBdmVyYWdlcyA9IGF3YWl0IHRoaXMuZ2V0Q2F0ZWdvcnlBdmVyYWdlcyh3aGVyZSk7XHJcbiAgICBcclxuICAgIC8vIEdldCB0cmVuZCBkYXRhXHJcbiAgICBjb25zdCB0cmVuZCA9IGF3YWl0IHRoaXMuZ2V0VHJlbmREYXRhKHdoZXJlLCB2YWxpZGF0ZWRGaWx0ZXJzLmJ1Y2tldCk7XHJcbiAgICBcclxuICAgIC8vIEdldCBpc3N1ZXMgKGNhdGVnb3JpZXMgd2l0aCBsb3cgcmF0aW5ncylcclxuICAgIGNvbnN0IGlzc3VlcyA9IGF3YWl0IHRoaXMuZ2V0SXNzdWVzKHdoZXJlKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG9wTGlzdGluZ3MsXHJcbiAgICAgIGNhdGVnb3J5QXZlcmFnZXMsXHJcbiAgICAgIHRyZW5kLFxyXG4gICAgICBpc3N1ZXMsXHJcbiAgICB9O1xyXG4gIH1cclxuICBcclxuICBwcml2YXRlIGFzeW5jIGdldFRvcExpc3RpbmdzKHdoZXJlOiBhbnkpOiBQcm9taXNlPEFuYWx5dGljc0RhdGFbJ3RvcExpc3RpbmdzJ10+IHtcclxuICAgIGNvbnN0IGxpc3RpbmdzID0gYXdhaXQgcHJpc21hLnJldmlldy5ncm91cEJ5KHtcclxuICAgICAgYnk6IFsnbGlzdGluZ0lkJ10sXHJcbiAgICAgIHdoZXJlLFxyXG4gICAgICBfY291bnQ6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgICAgX2F2Zzoge1xyXG4gICAgICAgIHJhdGluZ092ZXJhbGw6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgbGlzdGluZ0lkcyA9IGxpc3RpbmdzLm1hcChsID0+IGwubGlzdGluZ0lkKTtcclxuICAgIGNvbnN0IGxpc3RpbmdEZXRhaWxzID0gYXdhaXQgcHJpc21hLmxpc3RpbmcuZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZTogeyBpZDogeyBpbjogbGlzdGluZ0lkcyB9IH0sXHJcbiAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9LFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBsaXN0aW5nc1xyXG4gICAgICAubWFwKGxpc3RpbmcgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRldGFpbCA9IGxpc3RpbmdEZXRhaWxzLmZpbmQoZCA9PiBkLmlkID09PSBsaXN0aW5nLmxpc3RpbmdJZCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGxpc3RpbmdJZDogbGlzdGluZy5saXN0aW5nSWQsXHJcbiAgICAgICAgICBuYW1lOiBkZXRhaWw/Lm5hbWUgfHwgJ1Vua25vd24nLFxyXG4gICAgICAgICAgYXZnUmF0aW5nOiBsaXN0aW5nLl9hdmcucmF0aW5nT3ZlcmFsbCB8fCAwLFxyXG4gICAgICAgICAgY291bnQ6IGxpc3RpbmcuX2NvdW50LmlkLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmF2Z1JhdGluZyAtIGEuYXZnUmF0aW5nKVxyXG4gICAgICAuc2xpY2UoMCwgNSk7XHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q2F0ZWdvcnlBdmVyYWdlcyh3aGVyZTogYW55KTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiB7XHJcbiAgICBjb25zdCByZXZpZXdzID0gYXdhaXQgcHJpc21hLnJldmlldy5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlLFxyXG4gICAgICBzZWxlY3Q6IHsgY2F0ZWdvcmllczogdHJ1ZSB9LFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGNhdGVnb3J5VG90YWxzOiBSZWNvcmQ8c3RyaW5nLCB7IHN1bTogbnVtYmVyOyBjb3VudDogbnVtYmVyIH0+ID0ge307XHJcbiAgICBcclxuICAgIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xyXG4gICAgICBpZiAocmV2aWV3LmNhdGVnb3JpZXMpIHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gcmV2aWV3LmNhdGVnb3JpZXMgYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcclxuICAgICAgICBPYmplY3QuZW50cmllcyhjYXRlZ29yaWVzKS5mb3JFYWNoKChbY2F0ZWdvcnksIHJhdGluZ10pID0+IHtcclxuICAgICAgICAgIGlmICghY2F0ZWdvcnlUb3RhbHNbY2F0ZWdvcnldKSB7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5VG90YWxzW2NhdGVnb3J5XSA9IHsgc3VtOiAwLCBjb3VudDogMCB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2F0ZWdvcnlUb3RhbHNbY2F0ZWdvcnldLnN1bSArPSByYXRpbmc7XHJcbiAgICAgICAgICBjYXRlZ29yeVRvdGFsc1tjYXRlZ29yeV0uY291bnQgKz0gMTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGF2ZXJhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XHJcbiAgICBPYmplY3QuZW50cmllcyhjYXRlZ29yeVRvdGFscykuZm9yRWFjaCgoW2NhdGVnb3J5LCB7IHN1bSwgY291bnQgfV0pID0+IHtcclxuICAgICAgYXZlcmFnZXNbY2F0ZWdvcnldID0gTWF0aC5yb3VuZCgoc3VtIC8gY291bnQpICogMTApIC8gMTA7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGF2ZXJhZ2VzO1xyXG4gIH1cclxuICBcclxuICBwcml2YXRlIGFzeW5jIGdldFRyZW5kRGF0YSh3aGVyZTogYW55LCBidWNrZXQ6ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyk6IFByb21pc2U8QW5hbHl0aWNzRGF0YVsndHJlbmQnXT4ge1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGxldCBzdGFydERhdGU6IERhdGU7XHJcbiAgICBsZXQgZm9ybWF0U3RyaW5nOiBzdHJpbmc7XHJcbiAgICBsZXQgZ3JvdXBCeTogYW55O1xyXG4gICAgXHJcbiAgICBzd2l0Y2ggKGJ1Y2tldCkge1xyXG4gICAgICBjYXNlICdkYXknOlxyXG4gICAgICAgIHN0YXJ0RGF0ZSA9IHN1YkRheXMobm93LCAzMCk7XHJcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gJ3l5eXktTU0tZGQnO1xyXG4gICAgICAgIGdyb3VwQnkgPSB7XHJcbiAgICAgICAgICB5ZWFyOiB0cnVlLFxyXG4gICAgICAgICAgbW9udGg6IHRydWUsXHJcbiAgICAgICAgICBkYXk6IHRydWUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnd2Vlayc6XHJcbiAgICAgICAgc3RhcnREYXRlID0gc3ViV2Vla3Mobm93LCAxMik7XHJcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gJ3l5eXktXFwnV1xcJ3d3JztcclxuICAgICAgICBncm91cEJ5ID0ge1xyXG4gICAgICAgICAgeWVhcjogdHJ1ZSxcclxuICAgICAgICAgIHdlZWs6IHRydWUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbW9udGgnOlxyXG4gICAgICAgIHN0YXJ0RGF0ZSA9IHN1Yk1vbnRocyhub3csIDEyKTtcclxuICAgICAgICBmb3JtYXRTdHJpbmcgPSAneXl5eS1NTSc7XHJcbiAgICAgICAgZ3JvdXBCeSA9IHtcclxuICAgICAgICAgIHllYXI6IHRydWUsXHJcbiAgICAgICAgICBtb250aDogdHJ1ZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB0cmVuZERhdGEgPSBhd2FpdCBwcmlzbWEucmV2aWV3Lmdyb3VwQnkoe1xyXG4gICAgICBieTogWydzdWJtaXR0ZWRBdCddLFxyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIC4uLndoZXJlLFxyXG4gICAgICAgIHN1Ym1pdHRlZEF0OiB7XHJcbiAgICAgICAgICBndGU6IHN0YXJ0RGF0ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBfY291bnQ6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgICAgX2F2Zzoge1xyXG4gICAgICAgIHJhdGluZ092ZXJhbGw6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gR3JvdXAgYnkgYnVja2V0XHJcbiAgICBjb25zdCBidWNrZXRzOiBSZWNvcmQ8c3RyaW5nLCB7IHN1bTogbnVtYmVyOyBjb3VudDogbnVtYmVyOyByYXRpbmdzOiBudW1iZXJbXSB9PiA9IHt9O1xyXG4gICAgXHJcbiAgICB0cmVuZERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgbGV0IGJ1Y2tldEtleTogc3RyaW5nO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChidWNrZXQpIHtcclxuICAgICAgICBjYXNlICdkYXknOlxyXG4gICAgICAgICAgYnVja2V0S2V5ID0gZm9ybWF0KGl0ZW0uc3VibWl0dGVkQXQsICd5eXl5LU1NLWRkJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3ZWVrJzpcclxuICAgICAgICAgIGJ1Y2tldEtleSA9IGZvcm1hdChpdGVtLnN1Ym1pdHRlZEF0LCAneXl5eS1cXCdXXFwnd3cnKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgICAgIGJ1Y2tldEtleSA9IGZvcm1hdChpdGVtLnN1Ym1pdHRlZEF0LCAneXl5eS1NTScpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghYnVja2V0c1tidWNrZXRLZXldKSB7XHJcbiAgICAgICAgYnVja2V0c1tidWNrZXRLZXldID0geyBzdW06IDAsIGNvdW50OiAwLCByYXRpbmdzOiBbXSB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBidWNrZXRzW2J1Y2tldEtleV0uc3VtICs9IGl0ZW0uX2NvdW50LmlkO1xyXG4gICAgICBidWNrZXRzW2J1Y2tldEtleV0uY291bnQgKz0gMTtcclxuICAgICAgaWYgKGl0ZW0uX2F2Zy5yYXRpbmdPdmVyYWxsKSB7XHJcbiAgICAgICAgYnVja2V0c1tidWNrZXRLZXldLnJhdGluZ3MucHVzaChpdGVtLl9hdmcucmF0aW5nT3ZlcmFsbCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoYnVja2V0cylcclxuICAgICAgLm1hcCgoW2J1Y2tldCwgZGF0YV0pID0+ICh7XHJcbiAgICAgICAgYnVja2V0LFxyXG4gICAgICAgIGF2Z1JhdGluZzogZGF0YS5yYXRpbmdzLmxlbmd0aCA+IDAgXHJcbiAgICAgICAgICA/IE1hdGgucm91bmQoKGRhdGEucmF0aW5ncy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIGRhdGEucmF0aW5ncy5sZW5ndGgpICogMTApIC8gMTBcclxuICAgICAgICAgIDogMCxcclxuICAgICAgICBjb3VudDogZGF0YS5zdW0sXHJcbiAgICAgIH0pKVxyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5idWNrZXQubG9jYWxlQ29tcGFyZShiLmJ1Y2tldCkpO1xyXG4gIH1cclxuICBcclxuICBwcml2YXRlIGFzeW5jIGdldElzc3Vlcyh3aGVyZTogYW55KTogUHJvbWlzZTxBbmFseXRpY3NEYXRhWydpc3N1ZXMnXT4ge1xyXG4gICAgY29uc3QgY2F0ZWdvcnlBdmVyYWdlcyA9IGF3YWl0IHRoaXMuZ2V0Q2F0ZWdvcnlBdmVyYWdlcyh3aGVyZSk7XHJcbiAgICBjb25zdCBpc3N1ZXM6IEFuYWx5dGljc0RhdGFbJ2lzc3VlcyddID0gW107XHJcbiAgICBcclxuICAgIE9iamVjdC5lbnRyaWVzKGNhdGVnb3J5QXZlcmFnZXMpLmZvckVhY2goKFtjYXRlZ29yeSwgYXZnXSkgPT4ge1xyXG4gICAgICBpZiAoYXZnIDwgNykge1xyXG4gICAgICAgIGlzc3Vlcy5wdXNoKHtcclxuICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgYXZnLFxyXG4gICAgICAgICAgZGVsdGE6IC0xLjEsIC8vIE1vY2sgZGVsdGEgZm9yIG5vd1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgZ2V0TGlzdGluZ3NXaXRoU3RhdHMoKTogUHJvbWlzZTxMaXN0aW5nV2l0aFN0YXRzW10+IHtcclxuICAgIGNvbnN0IGxpc3RpbmdzID0gYXdhaXQgcHJpc21hLnJldmlldy5ncm91cEJ5KHtcclxuICAgICAgYnk6IFsnbGlzdGluZ0lkJ10sXHJcbiAgICAgIF9jb3VudDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgICBfYXZnOiB7XHJcbiAgICAgICAgcmF0aW5nT3ZlcmFsbDogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBjb25zdCBsaXN0aW5nSWRzID0gbGlzdGluZ3MubWFwKGwgPT4gbC5saXN0aW5nSWQpO1xyXG4gICAgY29uc3QgbGlzdGluZ0RldGFpbHMgPSBhd2FpdCBwcmlzbWEubGlzdGluZy5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB7IGluOiBsaXN0aW5nSWRzIH0gfSxcclxuICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlIH0sXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGxpc3RpbmdzXHJcbiAgICAgIC5tYXAobGlzdGluZyA9PiB7XHJcbiAgICAgICAgY29uc3QgZGV0YWlsID0gbGlzdGluZ0RldGFpbHMuZmluZChkID0+IGQuaWQgPT09IGxpc3RpbmcubGlzdGluZ0lkKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgaWQ6IGxpc3RpbmcubGlzdGluZ0lkLFxyXG4gICAgICAgICAgbmFtZTogZGV0YWlsPy5uYW1lIHx8ICdVbmtub3duJyxcclxuICAgICAgICAgIGF2Z1JhdGluZzogTWF0aC5yb3VuZCgobGlzdGluZy5fYXZnLnJhdGluZ092ZXJhbGwgfHwgMCkgKiAxMCkgLyAxMCxcclxuICAgICAgICAgIHJldmlld0NvdW50OiBsaXN0aW5nLl9jb3VudC5pZCxcclxuICAgICAgICB9O1xyXG4gICAgICB9KVxyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5hdmdSYXRpbmcgLSBhLmF2Z1JhdGluZyk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJhbmFseXRpY3NGaWx0ZXJzU2NoZW1hIiwiZm9ybWF0Iiwic3ViRGF5cyIsInN1YldlZWtzIiwic3ViTW9udGhzIiwiQW5hbHl0aWNzU2VydmljZSIsImdldEFuYWx5dGljcyIsImZpbHRlcnMiLCJ2YWxpZGF0ZWRGaWx0ZXJzIiwicGFyc2UiLCJ3aGVyZSIsImxpc3RpbmdJZCIsImZyb20iLCJ0byIsInN1Ym1pdHRlZEF0IiwiZ3RlIiwiRGF0ZSIsImx0ZSIsInRvcExpc3RpbmdzIiwiZ2V0VG9wTGlzdGluZ3MiLCJjYXRlZ29yeUF2ZXJhZ2VzIiwiZ2V0Q2F0ZWdvcnlBdmVyYWdlcyIsInRyZW5kIiwiZ2V0VHJlbmREYXRhIiwiYnVja2V0IiwiaXNzdWVzIiwiZ2V0SXNzdWVzIiwibGlzdGluZ3MiLCJyZXZpZXciLCJncm91cEJ5IiwiYnkiLCJfY291bnQiLCJpZCIsIl9hdmciLCJyYXRpbmdPdmVyYWxsIiwibGlzdGluZ0lkcyIsIm1hcCIsImwiLCJsaXN0aW5nRGV0YWlscyIsImxpc3RpbmciLCJmaW5kTWFueSIsImluIiwic2VsZWN0IiwibmFtZSIsImRldGFpbCIsImZpbmQiLCJkIiwiYXZnUmF0aW5nIiwiY291bnQiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInJldmlld3MiLCJjYXRlZ29yaWVzIiwiY2F0ZWdvcnlUb3RhbHMiLCJmb3JFYWNoIiwiT2JqZWN0IiwiZW50cmllcyIsImNhdGVnb3J5IiwicmF0aW5nIiwic3VtIiwiYXZlcmFnZXMiLCJNYXRoIiwicm91bmQiLCJub3ciLCJzdGFydERhdGUiLCJmb3JtYXRTdHJpbmciLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJ3ZWVrIiwidHJlbmREYXRhIiwiYnVja2V0cyIsIml0ZW0iLCJidWNrZXRLZXkiLCJyYXRpbmdzIiwicHVzaCIsImRhdGEiLCJsZW5ndGgiLCJyZWR1Y2UiLCJsb2NhbGVDb21wYXJlIiwiYXZnIiwiZGVsdGEiLCJnZXRMaXN0aW5nc1dpdGhTdGF0cyIsInJldmlld0NvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./services/analytics.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/date-fns"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2Fhome%2Fachref%2FDownloads%2Fachref%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fachref%2FDownloads%2Fachref&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();